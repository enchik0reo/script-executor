# ADR 6: Возможность конкурентного выполнения команд

## Контекст

При разработке проекта стояла задача запуска нексольких команд одновременно, запись вывода каждой в базу данных и возможность остановки каждой в ручную.

## Решение

Было принято решение запускать каждую команду в отдельной горутине. Для запуска команд был создан отдельный пакет с соответствующей функцией, которая принимает стоп канал, запускает каждую команду в отдельной горутине и возвращает два информационных канала. В первый возвращаемый канал она записывает результаты работы команды по мере её выполнения (output), а во второй ошибки, если они случаются. При получении сигнала из стоп канала она прирывает выполнение команды, посылает оповещение об успешной остановке команды и закрывает информационные каналы. Другая сторона читает из этих каналов и, получая из них результаты, записывает их в базу данных.

## Статус

Принято

## Последствия

Появилась возможность конкурентного запуска нескольких команд, а так же отслеживания их работы по мере выполнения и ручной остановки каждой по сигналу. 
